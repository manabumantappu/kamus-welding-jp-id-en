<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kamus Welding JPâ€“IDâ€“EN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* =====================
   COLOR SYSTEM
===================== */
:root{
  --bg:#f4f6f5;
  --card:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --primary:#3a5a40;
  --highlight:#fde68a;
}

/* DARK MODE */
body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#f8fafc;
  --muted:#94a3b8;
  --primary:#86efac;
  --highlight:#92400e;
}

/* =====================
   BASE
===================== */
body{
  margin:0;
  font-family:system-ui,Segoe UI;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

header{
  padding:28px 20px;
  text-align:center;
  background:linear-gradient(135deg,#344e41,#3a5a40);
  color:#fff;
}

.container{
  max-width:1100px;
  margin:30px auto;
  padding:0 20px;
}

/* =====================
   TOOLS
===================== */
.tools{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:space-between;
  margin-bottom:20px;
}

.tools-left,
.tools-right{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

input, select, button{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid #d1d5db;
  background:var(--card);
  color:var(--text);
}

button{
  font-weight:600;
  cursor:pointer;
}

button.active{
  background:var(--primary);
  color:#fff;
  border:none;
}

/* =====================
   GRID & CARD
===================== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:16px;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:18px;
  box-shadow:0 12px 28px rgba(0,0,0,.12);
}

.card h3{
  margin:0;
  color:var(--primary);
}

.romaji{
  font-size:13px;
  color:var(--muted);
  margin-bottom:8px;
}

.meaning{
  font-size:16px;
  font-weight:600;
}

/* =====================
   HIGHLIGHT
===================== */
mark{
  background:var(--highlight);
  color:#111;
  padding:2px 4px;
  border-radius:4px;
}

/* =====================
   CATEGORY BADGE
===================== */
.badge{
  display:inline-block;
  margin-top:12px;
  padding:4px 10px;
  font-size:12px;
  border-radius:999px;
  font-weight:700;
}

.Welding{background:#fee2e2;color:#991b1b;}
.Material{background:#fef3c7;color:#92400e;}
.Equipment{background:#e0f2fe;color:#075985;}
.Inspection{background:#ede9fe;color:#5b21b6;}
.Defect{background:#ffe4e6;color:#9f1239;}
.Safety{background:#dcfce7;color:#166534;}
.Tools{background:#f1f5f9;color:#334155;}
.Process{background:#fae8ff;color:#701a75;}

footer{
  text-align:center;
  padding:30px 10px;
  font-size:13px;
  color:var(--muted);
}

/* =====================
   PAGINATION
===================== */
.pagination{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  justify-content:center;
  margin-top:30px;
}

.pagination button{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #d1d5db;
  background:var(--card);
  color:var(--text);
  cursor:pointer;
  font-weight:600;
}

.pagination button.active{
  background:var(--primary);
  color:#fff;
  border:none;
}

.pagination button:disabled{
  opacity:.4;
  cursor:not-allowed;
}
   
</style>
</head>

<body>

<header>
  <h1>Kamus Welding JPâ€“IDâ€“EN</h1>
  <p>SSW â€¢ Manufaktur â€¢ Industri Jepang</p>
</header>

<div class="container">

<div class="tools">
  <div class="tools-left">
    <input id="search" placeholder="Cari kosakata...">
    <select id="category">
      <option value="all">Semua Kategori</option>
      <option>Welding</option>
      <option>Material</option>
      <option>Equipment</option>
      <option>Inspection</option>
      <option>Defect</option>
      <option>Safety</option>
      <option>Tools</option>
      <option>Process</option>
    </select>
    <select id="sort">
      <option value="jp">Sort JP Aâ€“Z</option>
      <option value="id">Sort ID Aâ€“Z</option>
      <option value="en">Sort EN Aâ€“Z</option>
    </select>
  </div>

  <div class="tools-right">
    <button class="active" onclick="setLang('jp')">JP</button>
    <button onclick="setLang('id')">ID</button>
    <button onclick="setLang('en')">EN</button>
    <button onclick="toggleDark()">ðŸŒ™</button>
  </div>
</div>

<div class="grid" id="list"></div>
<div id="pagination" class="pagination"></div>
   
</div>

<footer>
Â© Kamus Welding JPâ€“IDâ€“EN
</footer>

<!-- DATA -->
<script src="data.js"></script>

<!-- VALIDASI DUPLIKAT JP -->
<script>
/* =========================
   VALIDASI DUPLIKAT JP
========================= */
(function checkDuplicateJP(){
  const seen = new Set();
  const duplicates = [];

  data.forEach(item=>{
    if(seen.has(item.jp)){
      duplicates.push(item.jp);
    }else{
      seen.add(item.jp);
    }
  });

  if(duplicates.length){
    console.warn("âš ï¸ DUPLIKAT JP TERDETEKSI:");
    duplicates.forEach(jp=>console.warn(" -", jp));
    console.warn("Total duplikat:", duplicates.length);
  }else{
    console.log("âœ… VALIDASI OK: Tidak ada kosakata JP duplikat");
  }
})();
</script>
   
<script>
let lang="jp";
let currentPage = 1;
const itemsPerPage = 24;

const list = document.getElementById("list");
const search = document.getElementById("search");
const category = document.getElementById("category");
const sort = document.getElementById("sort");
const pagination = document.getElementById("pagination");

/* Highlight */
function highlight(text, keyword){
  if(!keyword) return text;
  const regex = new RegExp(`(${keyword})`, "gi");
  return text.replace(regex, "<mark>$1</mark>");
}

function getFilteredData(){
  let filtered = [...data];
  const key = search.value.toLowerCase();

  if(category.value !== "all"){
    filtered = filtered.filter(d => d.cat === category.value);
  }

  filtered = filtered.filter(d =>
    d[lang].toLowerCase().includes(key)
  );

  filtered.sort((a,b)=>a[sort.value].localeCompare(b[sort.value]));

  return filtered;
}

function render(){
  const filtered = getFilteredData();
  const totalPages = Math.ceil(filtered.length / itemsPerPage);
  if(currentPage > totalPages) currentPage = 1;

  list.innerHTML = "";

  const start = (currentPage - 1) * itemsPerPage;
  const end = start + itemsPerPage;

  filtered.slice(start, end).forEach(d=>{
    list.innerHTML += `
      <div class="card">
        <h3>${highlight(d.jp, search.value)}</h3>
        <div class="romaji">${d.romaji}</div>
        <div class="meaning">${highlight(d[lang], search.value)}</div>
        <div class="badge ${d.cat}">${d.cat}</div>
      </div>
    `;
  });

  renderPagination(totalPages);
}

function renderPagination(totalPages){
  pagination.innerHTML = "";
  if(totalPages <= 1) return;

  const prev = document.createElement("button");
  prev.textContent = "â—€";
  prev.disabled = currentPage === 1;
  prev.onclick = ()=>{ currentPage--; render(); };
  pagination.appendChild(prev);

  for(let i=1;i<=totalPages;i++){
    const btn = document.createElement("button");
    btn.textContent = i;
    if(i === currentPage) btn.classList.add("active");
    btn.onclick = ()=>{ currentPage = i; render(); };
    pagination.appendChild(btn);
  }

  const next = document.createElement("button");
  next.textContent = "â–¶";
  next.disabled = currentPage === totalPages;
  next.onclick = ()=>{ currentPage++; render(); };
  pagination.appendChild(next);
}

function setLang(l){
  lang = l;
  currentPage = 1;
  document.querySelectorAll(".tools-right button")
    .forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
  render();
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

/* Reset ke halaman 1 saat filter berubah */
search.oninput = ()=>{ currentPage = 1; render(); };
category.onchange = ()=>{ currentPage = 1; render(); };
sort.onchange = ()=>{ currentPage = 1; render(); };

render();
</script>

</body>
</html>
